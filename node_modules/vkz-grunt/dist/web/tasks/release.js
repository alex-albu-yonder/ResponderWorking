module.exports = function (grunt) {
	grunt.registerTask('release', 'creates a RC', function () {
		grunt.task.run('clean:all');

		grunt.task.run('shell:bowerInstall');

		if(grunt.config('settings').silverlightSupport) {
			var shouldBuildSilverlight = grunt.option('buildSilverlight') === false ? false: true;
			console.log("should build silverligth " + shouldBuildSilverlight); 
			if(shouldBuildSilverlight) {
				grunt.task.run('msbuild:release');
			}
			
			if(grunt.option('obfuscate')) {
				grunt.task.run('shell:obfuscate');
			}
			
			grunt.task.run('copy:silverlightBin');
		}

        grunt.task.run('transformJSON:release');
        grunt.task.run('copy:release');
        grunt.task.run('concat:release');
        grunt.task.run('ngAnnotate:release');
        grunt.task.run('uglify:release');

		grunt.task.run('useSpecificStyle:release');

		if(grunt.config('settings').sassSupported) { //Added to support sass compiling during the PoC
			grunt.task.run('sass:release');
		}

        grunt.task.run('ngtemplates:release');
        grunt.task.run('htmlbuild:release');
		grunt.task.run('postcss:release');
        grunt.task.run('filerev');
        grunt.task.run('usemin');

		if(!grunt.option('standalone')) {
			grunt.task.run('connect:www');
		}
    });
};
