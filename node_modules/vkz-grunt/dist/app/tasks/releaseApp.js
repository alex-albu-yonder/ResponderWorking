module.exports = function(grunt) {

    grunt.registerTask('releaseApp', 'Root task build for release', function() {
        for (var versionIndex = 0; versionIndex < grunt.config('config').supportedServices.length; versionIndex++) {
            var currentVersion = grunt.config('config').supportedServices[versionIndex];

            grunt.task.run('copy:releaseVersion:' + currentVersion);
            grunt.task.run('concat:release:' + currentVersion);
            grunt.task.run('ngAnnotate:releaseVersion:' + currentVersion);
            grunt.task.run('uglify:release:' + currentVersion);
            grunt.task.run('cssmin:release:' + currentVersion);
            grunt.task.run('ngtemplates:release:' + currentVersion);

            if (process.platform !== "win32") {
                grunt.task.run('shell:prepareHtmlbuild:' + currentVersion);
            }

            grunt.task.run('htmlbuild:release:' + currentVersion);
            grunt.task.run('postcss:release:' + currentVersion);
        }
    });
};
